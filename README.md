# Шаблон дл настройки рабочего пространства в VSCode

Структура каталога проекта:

```
main_project_folder
  ├── simbioz_repo
    ├── каталоги репозитария сборки simbioz
  ├── client_addons
    ├── каталоги дополнительных модулей
  ├── docker
    ├── тут файл Dockerfile для формирования образа odoo
  ├── varlib
    ├── каталог для filestore odoo и для хранения сессий. Очень важно проверить доступы к этому каталогу пользователю докера
  └── conf
    ├── каталог с конфигурационными файлами odoo
  projectname.code-workspace - файл настройки рабочего пространства
```

В каталог `simbioz_repo` нужно клонировать репозиторий именно сборки (AMS, CRMS и т.д).
Также в этот же каталог подключаются другие модули сборки, которые изначально не входили в поставку.
_Подключение модулей к сборке - отдельная тема, которая не касается этого документа._

В каталог client_addons клонируется репозитарий с модулями для конкретного клиента. В эту
папку можно склонировать несколько репозитариев и разложить их по подпапкам. <br/>

Обязательно нужно убедиться, что каталог varlib доступен для записи пользователя, под которым все работает в докере. <br/>

В Dockerfile указано ID пользователя и группы 1000. Есть два варианта решения проблемы с доступом к папке:

1. Дать доступ на запись всем пользователям и группам (`chmod 777 varlib`)
2. Определить ID пользователя под которым запускается докер (текущий пользователь системы обычно) и в Dockerfile для создаваемого пользователя указать эти ID.

Вся настройка рабочего пространства для проекта настроена именно на эту структуру каталогов. Если нужно поменять структуру - нужно будет исправить настройки рабочего пространства.

Опсиание настройки рабочего пространства описано непосредственно в файле `odoo_simbioz_docker.code-workspace`. <br/>

## Порядок работы с репозитарием

1. Склонировать репозитарий
2. Удалить из него папку .git (т.е. просто отключить отслеживание изменений, т.к. мы будем клонировать другие репозитарии в папки и нам нет смысла что-то тут отслеживать)
3. Открыть каталог в vscode
4. Произвести настройку файлов (см. комментарии в самом файле)
   * `.vscode/settings.json`
   * `.vscode/launch.json`
   * `.vscode/tasks.json`
5. Провести настройку файла `conf/odoo-server.conf` (см. комментарии в самом файле)
